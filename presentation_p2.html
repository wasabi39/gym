<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://d3js.org/d3.v4.js"></script>
    <link rel="stylesheet" href="styles.css">
    <title>Document</title>
    <div id="my_dataviz"></div>
    <script src="https://cdn.jsdelivr.net/npm/vega@5.25.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.12.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.22.1"></script>
    
</head>
<body>
    <script type="text/javascript">
      var yourVlSpec = {
      $schema: 'https://vega.github.io/schema/vega-lite/v5.json',
      description: 'A simple bar chart with embedded data.',
      data: {
          "url": "https://raw.githubusercontent.com/wasabi39/gym/main/subject_subjectcount_KU2022_AU2022_percentageteaching2019.csv"
      },
      "transform": [
          {"calculate": "(parseFloat(datum.jobs) / (7 * parseFloat(datum.percentage_teaching) * (parseFloat(datum.ku_degrees) + parseFloat(datum.au_degrees)))) * 100", "as": "jobapplicantratio"},
          {"calculate": "parseFloat(datum.ku_degrees) + parseFloat(datum.au_degrees)", "as": "degrees"}
      ],
      "params": [{
      "name": "grid",
      "select": "interval",
      "bind": "scales"
      }],
      mark: 'point',
      encoding: {
        x: {field: 'degrees', type: 'quantitative', "scale": {"zero": false}},
        y: {field: 'jobapplicantratio', type: 'quantitative', "scale": {"zero": false}},
        "color": {"field": "subject", "type": "nominal"},
        "shape": {"field": "subject", "type": "nominal"},
        "tooltip": [
          {"field": "subject", "type": "nominal"},
          {"field": "jobs", "type": "ordinal"},
          {"field": "degrees", "type": "ordinal"},
          {"field": "percentage_teaching", "type": "ordinal"},
          {"field": "jobapplicantratio", "type": "ordinal"}
        ]
      }
    };
      vegaEmbed('#vis', yourVlSpec);
    </script>
    <div id="vis2"></div>
    <script type="text/javascript">
        var yourVlSpec = {
        $schema: 'https://vega.github.io/schema/vega-lite/v5.json',
        description: 'A simple bar chart with embedded data.',
        data: {
            "url": "https://raw.githubusercontent.com/wasabi39/gym/main/subject_subjectcount_KU2022_AU2022_percentageteaching2019.csv"
        },
        "transform": [
            {"calculate": "(parseFloat(datum.jobs) / (7 * parseFloat(datum.percentage_teaching) * (parseFloat(datum.ku_degrees) + parseFloat(datum.au_degrees)))) * 100", "as": "jobapplicantratio"},
            {"calculate": "parseFloat(datum.ku_degrees) + parseFloat(datum.au_degrees)", "as": "degrees"}
        ],
        "params": [{
        "name": "grid",
        "select": "interval",
        "bind": "scales"
        }],
        mark: 'point',
        encoding: {
          x: {field: 'jobs', type: 'quantitative', "scale": {"zero": false}},
          y: {field: 'jobapplicantratio', type: 'quantitative', "scale": {"zero": false}},
          "color": {"field": "subject", "type": "nominal"},
          "shape": {"field": "subject", "type": "nominal"},
          "tooltip": [
            {"field": "subject", "type": "nominal"},
            {"field": "jobs", "type": "ordinal"},
            {"field": "degrees", "type": "ordinal"},
            {"field": "percentage_teaching", "type": "ordinal"},
            {"field": "jobapplicantratio", "type": "ordinal"}
          ]
        }
      };
      vegaEmbed('#vis2', yourVlSpec);
    </script>
</body>
</html>
